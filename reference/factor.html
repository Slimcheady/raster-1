<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Factors — factors • raster</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Factors — factors" />
<meta property="og:description" content="

These functions allow for defining a RasterLayer as a categorical variable. Such a RasterLayer is linked to other values via a &quot;Raster Attribute Table&quot; (RAT). Thus the cell values are an index, whereas the actual values of interest are in the RAT. The RAT is a data.frame. The first column in the RAT (&quot;ID&quot;) has the unique cell values of the layer; this column should normally not be changed. The other columns can be of any basic type (factor, character, integer, numeric or logical). The functions documented here are mainly available such that files with a RAT can be read and processed; currently there is not too much further support. Whether a layer is defined as a factor or not is currently ignored by almost all functions. An exception is the 'extract' function (when used with option df=TRUE).
Function 'levels' returns the RAT for inspection. It can be modified and set using levels &amp;lt;- value  (but use caution as it is easy to mess things up).
as.factor and ratify create a layer with a RAT table. Function 'deratify' creates a single layer for a (or each) variable in the RAT table." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">raster</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.5-3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rspatial/raster/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Factors</h1>
    
    <div class="hidden name"><code>factor.Rd</code></div>
    </div>

    <div class="ref-description">
    

<p>These functions allow for defining a RasterLayer as a categorical variable. Such a RasterLayer is linked to other values via a "Raster Attribute Table" (RAT). Thus the cell values are an index, whereas the actual values of interest are in the RAT. The RAT is a data.frame. The first column in the RAT ("ID") has the unique cell values of the layer; this column should normally not be changed. The other columns can be of any basic type (factor, character, integer, numeric or logical). The functions documented here are mainly available such that files with a RAT can be read and processed; currently there is not too much further support. Whether a layer is defined as a factor or not is currently ignored by almost all functions. An exception is the 'extract' function (when used with option df=TRUE).</p>
<p>Function 'levels' returns the RAT for inspection. It can be modified and set using <code>levels &lt;- value</code>  (but use caution as it is easy to mess things up).</p>
<p><code>as.factor</code> and <code>ratify</code> create a layer with a RAT table. Function 'deratify' creates a single layer for a (or each) variable in the RAT table.</p>
    </div>

    <pre class="usage"><span class='fu'>is.factor</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
<span class='fu'>as.factor</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
<span class='fu'>levels</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='co'># S4 method for Raster</span>
<span class='fu'>ratify</span><span class='op'>(</span><span class='va'>x</span>, filename<span class='op'>=</span><span class='st'>""</span>, count<span class='op'>=</span><span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>factorValues</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>v</span>, layer<span class='op'>=</span><span class='fl'>1</span>, att<span class='op'>=</span><span class='cn'>NULL</span>, append.names<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'>deratify</span><span class='op'>(</span><span class='va'>x</span>, att<span class='op'>=</span><span class='cn'>NULL</span>, layer<span class='op'>=</span><span class='fl'>1</span>, complete<span class='op'>=</span><span class='cn'>FALSE</span>, drop<span class='op'>=</span><span class='cn'>TRUE</span>, fun<span class='op'>=</span><span class='st'>'mean'</span>, filename<span class='op'>=</span><span class='st'>''</span>, <span class='va'>...</span><span class='op'>)</span> 

<span class='fu'>asFactor</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Raster* object</p></td>
    </tr>
    <tr>
      <th>v</th>
      <td><p>integer cell values</p></td>
    </tr>
    <tr>
      <th>layer</th>
      <td><p>integer &gt; 0 indicating which layer to use (in a RasterStack or RasterBrick)</p></td>
    </tr>
    <tr>
      <th>att</th>
      <td><p>numeric or character. Which variable(s) in the RAT table should be used. If <code>NULL</code>, all variables are extracted. If using a numeric, skip the first two default columns</p></td>
    </tr>
    <tr>
      <th>append.names</th>
      <td><p>logical. Should names of data.frame returned by a combination of the name of the layer and the RAT variables? (can be useful for multilayer objects</p></td>
    </tr>
    <tr>
      <th>filename</th>
      <td><p>character. Optional</p></td>
    </tr>
    <tr>
      <th>count</th>
      <td><p>logical. If <code>TRUE</code>, a columns with frequencies is added</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments as for <code><a href='writeRaster.html'>writeRaster</a></code></p></td>
    </tr>
    <tr>
      <th>complete</th>
      <td><p>logical. If <code>TRUE</code>, the layer returned is no longer a factor</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>logical. If <code>TRUE</code> a factor is converted to a numerical value if possible</p></td>
    </tr>
    <tr>
      <th>fun</th>
      <td><p>character. Used to get a single value for each class for a weighted RAT table. 'mean', 'min', 'max', 'smallest', or 'largest'</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Raster* object; list (levels); boolean (is.factor); matrix (factorValues)</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>asFactor is deprecated and should not be used</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>)</span>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'><a href='raster.html'>raster</a></span><span class='op'>(</span>nrow<span class='op'>=</span><span class='fl'>10</span>, ncol<span class='op'>=</span><span class='fl'>10</span><span class='op'>)</span>
<span class='fu'><a href='getValues.html'>values</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fu'><a href='ncell.html'>ncell</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>10</span>
<span class='fu'>is.factor</span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] FALSE</div><div class='input'>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span>
<span class='va'>f</span> <span class='op'>&lt;-</span> <span class='fu'>as.factor</span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span>
<span class='fu'>is.factor</span><span class='op'>(</span><span class='va'>f</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>levels</span><span class='op'>(</span><span class='va'>f</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>x</span>
</div><div class='output co'>#&gt;    ID
#&gt; 1   0
#&gt; 2   1
#&gt; 3   2
#&gt; 4   3
#&gt; 5   4
#&gt; 6   5
#&gt; 7   6
#&gt; 8   7
#&gt; 9   8
#&gt; 10  9
#&gt; 11 10</div><div class='input'><span class='va'>x</span><span class='op'>$</span><span class='va'>code</span> <span class='op'>&lt;-</span> <span class='va'>letters</span><span class='op'>[</span><span class='fl'>10</span><span class='op'>:</span><span class='fl'>20</span><span class='op'>]</span>
<span class='fu'>levels</span><span class='op'>(</span><span class='va'>f</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>x</span>
<span class='fu'>levels</span><span class='op'>(</span><span class='va'>f</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt;    ID code
#&gt; 1   0    j
#&gt; 2   1    k
#&gt; 3   2    l
#&gt; 4   3    m
#&gt; 5   4    n
#&gt; 6   5    o
#&gt; 7   6    p
#&gt; 8   7    q
#&gt; 9   8    r
#&gt; 10  9    s
#&gt; 11 10    t
#&gt; </div><div class='input'><span class='va'>f</span>
</div><div class='output co'>#&gt; class      : RasterLayer 
#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)
#&gt; resolution : 36, 18  (x, y)
#&gt; extent     : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
#&gt; crs        : +proj=longlat +datum=WGS84 +no_defs 
#&gt; source     : memory
#&gt; names      : layer 
#&gt; values     : 0, 10  (min, max)
#&gt; attributes :
#&gt;        ID code
#&gt;  from:  0    j
#&gt;   to : 10    t
#&gt; </div><div class='input'>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'><a href='raster.html'>raster</a></span><span class='op'>(</span>nrow<span class='op'>=</span><span class='fl'>10</span>, ncol<span class='op'>=</span><span class='fl'>10</span><span class='op'>)</span>
<span class='fu'><a href='getValues.html'>values</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span> <span class='op'>=</span> <span class='fl'>1</span>
<span class='va'>r</span><span class='op'>[</span><span class='fl'>51</span><span class='op'>:</span><span class='fl'>100</span><span class='op'>]</span> <span class='op'>=</span> <span class='fl'>2</span>
<span class='va'>r</span><span class='op'>[</span><span class='fl'>3</span><span class='op'>:</span><span class='fl'>6</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span> <span class='op'>=</span> <span class='fl'>3</span>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'>ratify</span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span>

<span class='va'>rat</span> <span class='op'>&lt;-</span> <span class='fu'>levels</span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>rat</span><span class='op'>$</span><span class='va'>landcover</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Pine"</span>, <span class='st'>"Oak"</span>, <span class='st'>"Meadow"</span><span class='op'>)</span>
<span class='va'>rat</span><span class='op'>$</span><span class='va'>code</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>12</span>,<span class='fl'>25</span>,<span class='fl'>30</span><span class='op'>)</span>
<span class='fu'>levels</span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>rat</span>
<span class='va'>r</span>
</div><div class='output co'>#&gt; class      : RasterLayer 
#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)
#&gt; resolution : 36, 18  (x, y)
#&gt; extent     : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
#&gt; crs        : +proj=longlat +datum=WGS84 +no_defs 
#&gt; source     : memory
#&gt; names      : layer 
#&gt; values     : 1, 3  (min, max)
#&gt; attributes :
#&gt;  ID landcover code
#&gt;   1      Pine   12
#&gt;   2       Oak   25
#&gt;   3    Meadow   30
#&gt; </div><div class='input'>
<span class='co'># extract values for some cells</span>
<span class='va'>i</span> <span class='op'>&lt;-</span> <span class='fu'><a href='extract.html'>extract</a></span><span class='op'>(</span><span class='va'>r</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span>, <span class='fl'>25</span>,<span class='fl'>100</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>i</span>
</div><div class='output co'>#&gt; [1] 1 1 3 2</div><div class='input'><span class='co'># get the attribute values for these cells</span>
<span class='fu'>factorValues</span><span class='op'>(</span><span class='va'>r</span>, <span class='va'>i</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   landcover code
#&gt; 1      Pine   12
#&gt; 2      Pine   12
#&gt; 3    Meadow   30
#&gt; 4       Oak   25</div><div class='input'>
<span class='co'># write to file:</span>
<span class='co'># rr &lt;- writeRaster(r, rasterTmpFile(), overwrite=TRUE)</span>
<span class='co'># rr</span>

<span class='co'># create a single-layer factor </span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>deratify</span><span class='op'>(</span><span class='va'>r</span>, <span class='st'>"landcover"</span><span class='op'>)</span>
<span class='va'>x</span>
</div><div class='output co'>#&gt; class      : RasterLayer 
#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)
#&gt; resolution : 36, 18  (x, y)
#&gt; extent     : -180, 180, -90, 90  (xmin, xmax, ymin, ymax)
#&gt; crs        : +proj=longlat +datum=WGS84 +no_defs 
#&gt; source     : memory
#&gt; names      : landcover 
#&gt; values     : 1, 3  (min, max)
#&gt; attributes :
#&gt;  ID landcover
#&gt;   1      Pine
#&gt;   2       Oak
#&gt;   3    Meadow
#&gt; </div><div class='input'><span class='fu'>is.factor</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'>levels</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [[1]]
#&gt;   ID landcover
#&gt; 1  1      Pine
#&gt; 2  2       Oak
#&gt; 3  3    Meadow
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Robert J. Hijmans.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


